<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø£Ø¯Ù…Ù† Ø§Ù„Ù…ØªÙ…ÙŠØ²</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
        color: #333;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
      }

      .card {
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
        margin-bottom: 20px;
      }

      .header {
        background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
        color: white;
        padding: 30px;
        text-align: center;
        position: relative;
      }

      .header h1 {
        font-size: 32px;
        margin-bottom: 10px;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      .header p {
        opacity: 0.9;
        font-size: 16px;
      }

      .header-badge {
        position: absolute;
        top: 20px;
        left: 30px;
        background: rgba(255, 255, 255, 0.2);
        padding: 8px 15px;
        border-radius: 20px;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .content {
        padding: 40px;
      }

      /* Login Box */
      #loginBox {
        max-width: 500px;
        margin: 100px auto;
        animation: slideUp 0.6s ease;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .form-group {
        margin-bottom: 25px;
      }

      .form-group label {
        display: block;
        margin-bottom: 10px;
        font-weight: 600;
        color: #444;
        font-size: 15px;
      }

      .form-control {
        width: 100%;
        padding: 15px 20px;
        border: 2px solid #e0e0e0;
        border-radius: 12px;
        font-size: 16px;
        transition: all 0.3s;
        background: #f8f9fa;
      }

      .form-control:focus {
        border-color: #6a11cb;
        outline: none;
        background: white;
        box-shadow: 0 0 0 4px rgba(106, 17, 203, 0.1);
      }

      .btn {
        background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
        color: white;
        border: none;
        padding: 16px 30px;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        min-width: 120px;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(106, 17, 203, 0.3);
      }

      .btn:active {
        transform: translateY(0);
      }

      .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none !important;
        box-shadow: none !important;
      }

      .btn-danger {
        background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
      }

      .btn-success {
        background: linear-gradient(135deg, #00b09b 0%, #96c93d 100%);
      }

      .btn-warning {
        background: linear-gradient(135deg, #ff7e5f 0%, #feb47b 100%);
      }

      /* Dashboard */
      #dashboard {
        display: none;
        animation: fadeIn 0.6s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .dashboard-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 40px;
        flex-wrap: wrap;
        gap: 20px;
      }

      .dashboard-header h2 {
        font-size: 28px;
        color: #2c3e50;
      }

      .dashboard-header p {
        color: #7f8c8d;
        margin-top: 5px;
      }

      .header-actions {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 25px;
        margin-bottom: 40px;
      }

      .stat-card {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        border: 1px solid #eef2f7;
        transition:
          transform 0.3s,
          box-shadow 0.3s;
        position: relative;
        overflow: hidden;
      }

      .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      }

      .stat-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #6a11cb 0%, #2575fc 100%);
      }

      .stat-card:nth-child(2)::before {
        background: linear-gradient(90deg, #00b09b 0%, #96c93d 100%);
      }

      .stat-card:nth-child(3)::before {
        background: linear-gradient(90deg, #ff416c 0%, #ff4b2b 100%);
      }

      .stat-card:nth-child(4)::before {
        background: linear-gradient(90deg, #ff7e5f 0%, #feb47b 100%);
      }

      .stat-icon {
        font-size: 40px;
        margin-bottom: 15px;
        opacity: 0.8;
      }

      .stat-card h3 {
        font-size: 36px;
        color: #2c3e50;
        margin-bottom: 5px;
        font-weight: 700;
      }

      .stat-card p {
        color: #7f8c8d;
        font-size: 15px;
      }

      /* Add Code Form */
      .add-code-form {
        background: #f8f9fa;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 40px;
        border: 2px dashed #dee2e6;
      }

      .add-code-form h3 {
        color: #2c3e50;
        margin-bottom: 20px;
        font-size: 22px;
      }

      .form-row {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
      }

      .form-row .form-control {
        flex: 1;
        min-width: 250px;
      }

      /* Table */
      .table-container {
        background: white;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        margin-top: 20px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        min-width: 1000px;
      }

      thead {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      }

      th {
        padding: 18px 20px;
        text-align: right;
        font-weight: 600;
        color: #495057;
        border-bottom: 2px solid #dee2e6;
        font-size: 15px;
        white-space: nowrap;
      }

      td {
        padding: 16px 20px;
        border-bottom: 1px solid #eef2f7;
        color: #495057;
        transition: background 0.2s;
      }

      tr:hover td {
        background: #f8f9fa;
      }

      tr:last-child td {
        border-bottom: none;
      }

      .badge {
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 13px;
        font-weight: 600;
        display: inline-block;
      }

      .badge-success {
        background: #d4edda;
        color: #155724;
      }

      .badge-danger {
        background: #f8d7da;
        color: #721c24;
      }

      .badge-warning {
        background: #fff3cd;
        color: #856404;
      }

      .action-buttons {
        display: flex;
        gap: 10px;
      }

      .action-btn {
        padding: 6px 12px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 13px;
        font-weight: 500;
        transition: all 0.2s;
        display: inline-flex;
        align-items: center;
        gap: 5px;
      }

      .action-btn:hover {
        transform: translateY(-1px);
      }

      .delete-btn {
        background: #ff6b6b;
        color: white;
      }

      .delete-btn:hover {
        background: #ff5252;
      }

      .details-btn {
        background: #4dabf7;
        color: white;
      }

      .details-btn:hover {
        background: #339af0;
      }

      /* Alerts */
      .alert {
        padding: 16px 20px;
        border-radius: 12px;
        margin-bottom: 25px;
        display: none;
        animation: slideIn 0.3s ease;
        border: 1px solid transparent;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateX(-20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .alert-success {
        background: #d4edda;
        color: #155724;
        border-color: #c3e6cb;
      }

      .alert-danger {
        background: #f8d7da;
        color: #721c24;
        border-color: #f5c6cb;
      }

      .alert-warning {
        background: #fff3cd;
        color: #856404;
        border-color: #ffeaa7;
      }

      .alert-info {
        background: #d1ecf1;
        color: #0c5460;
        border-color: #bee5eb;
      }

      /* Loading */
      .loading {
        text-align: center;
        padding: 40px;
        color: #666;
        font-size: 16px;
      }

      .loading::after {
        content: "";
        display: inline-block;
        width: 24px;
        height: 24px;
        border: 3px solid #e0e0e0;
        border-top-color: #6a11cb;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-right: 15px;
        vertical-align: middle;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        align-items: center;
        justify-content: center;
        animation: fadeIn 0.3s ease;
      }

      .modal-content {
        background: white;
        border-radius: 20px;
        width: 90%;
        max-width: 500px;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        animation: modalSlideUp 0.4s ease;
      }

      @keyframes modalSlideUp {
        from {
          opacity: 0;
          transform: translateY(50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .modal-header {
        padding: 25px 30px;
        border-bottom: 1px solid #eef2f7;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .modal-header h3 {
        color: #2c3e50;
        font-size: 22px;
        margin: 0;
      }

      .modal-close {
        background: none;
        border: none;
        font-size: 24px;
        cursor: pointer;
        color: #7f8c8d;
        padding: 5px;
        line-height: 1;
      }

      .modal-close:hover {
        color: #2c3e50;
      }

      .modal-body {
        padding: 30px;
      }

      .modal-footer {
        padding: 20px 30px;
        border-top: 1px solid #eef2f7;
        display: flex;
        justify-content: flex-end;
        gap: 15px;
      }

      /* Empty State */
      .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: #7f8c8d;
      }

      .empty-state-icon {
        font-size: 60px;
        margin-bottom: 20px;
        opacity: 0.5;
      }

      .empty-state h3 {
        font-size: 22px;
        margin-bottom: 10px;
        color: #495057;
      }

      /* Responsive */
      @media (max-width: 1200px) {
        .content {
          padding: 30px;
        }

        .header h1 {
          font-size: 28px;
        }
      }

      @media (max-width: 768px) {
        body {
          padding: 15px;
        }

        .header {
          padding: 25px 20px;
        }

        .header h1 {
          font-size: 24px;
        }

        .header-badge {
          position: relative;
          top: 0;
          left: 0;
          margin-bottom: 15px;
          justify-content: center;
        }

        .content {
          padding: 25px 20px;
        }

        .dashboard-header {
          flex-direction: column;
          text-align: center;
          margin-bottom: 30px;
        }

        .header-actions {
          justify-content: center;
        }

        .stats-grid {
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 20px;
        }

        .add-code-form {
          padding: 25px 20px;
        }

        .form-row {
          flex-direction: column;
        }

        .form-row .form-control {
          min-width: auto;
        }

        .table-container {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
        }

        table {
          min-width: 700px;
        }
      }

      @media (max-width: 480px) {
        .header h1 {
          font-size: 22px;
        }

        .stats-grid {
          grid-template-columns: 1fr;
        }

        .stat-card {
          padding: 20px;
        }

        .btn {
          padding: 14px 20px;
          font-size: 15px;
        }

        .header-actions {
          flex-direction: column;
          width: 100%;
        }

        .header-actions .btn {
          width: 100%;
        }
      }

      /* Status indicators */
      .status-indicator {
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }

      .status-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        display: inline-block;
      }

      .status-dot.active {
        background: #00b09b;
        box-shadow: 0 0 0 3px rgba(0, 176, 155, 0.2);
      }

      .status-dot.inactive {
        background: #ff6b6b;
        box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.2);
      }

      /* Date formatting - English format */
      .date-text {
        font-family: "Courier New", monospace;
        background: #f8f9fa;
        padding: 4px 8px;
        border-radius: 6px;
        font-size: 12px;
        color: #495057;
      }

      /* Tooltip */
      .tooltip {
        position: relative;
        display: inline-block;
      }

      .tooltip .tooltip-text {
        visibility: hidden;
        background: #333;
        color: white;
        text-align: center;
        padding: 8px 12px;
        border-radius: 6px;
        position: absolute;
        z-index: 100;
        bottom: 125%;
        left: 50%;
        transform: translateX(-50%);
        white-space: nowrap;
        font-size: 13px;
        opacity: 0;
        transition: opacity 0.3s;
      }

      .tooltip:hover .tooltip-text {
        visibility: visible;
        opacity: 1;
      }

      /* Animation for new rows */
      @keyframes highlightRow {
        0% {
          background: rgba(106, 17, 203, 0.1);
        }
        100% {
          background: transparent;
        }
      }

      .highlight {
        animation: highlightRow 2s ease;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- ğŸ” Login Box -->
      <div id="loginBox" class="card">
        <div class="header">
          <div class="header-badge">
            <span>ğŸ”’ Ù†Ø¸Ø§Ù… Ø¢Ù…Ù†</span>
          </div>
          <h1>ğŸ‘‘ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø£Ø¯Ù…Ù† Ø§Ù„Ù…ØªÙ…ÙŠØ²</h1>
          <p>Ø¥Ø¯Ø§Ø±Ø© Ø£ÙƒÙˆØ§Ø¯ ØªÙØ¹ÙŠÙ„ Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù…ØªÙ…ÙŠØ²</p>
        </div>
        <div class="content">
          <div id="loginAlert" class="alert" style="display: none"></div>
          <div class="form-group">
            <label for="adminKey">ğŸ”‘ ÙƒÙ„Ù…Ø© Ø³Ø± Ø§Ù„Ø£Ø¯Ù…Ù†</label>
            <input
              type="password"
              id="adminKey"
              class="form-control"
              placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±"
              autocomplete="off"
            />
          </div>
          <button onclick="login()" class="btn" style="width: 100%">
            <span>ğŸš€ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span>
          </button>
          <div
            style="
              text-align: center;
              margin-top: 20px;
              color: #7f8c8d;
              font-size: 14px;
            "
          ></div>
        </div>
      </div>

      <!-- ğŸ“Š Dashboard -->
      <div id="dashboard" class="card">
        <div class="header">
          <div class="header-badge">
            <span id="dbStatus" class="status-indicator">
              <span class="status-dot active"></span>
              <span>MongoDB Ù…ØªØµÙ„</span>
            </span>
          </div>
          <h1>ğŸ“‹ Ø¥Ø¯Ø§Ø±Ø© Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„ØªÙØ¹ÙŠÙ„</h1>
          <p id="headerStats">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª...</p>
        </div>
        <div class="content">
          <div id="alert" class="alert" style="display: none"></div>

          <div class="dashboard-header">
            <div>
              <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒØŒ Ø§Ù„Ø£Ø¯Ù…Ù†</h2>
              <p>Ø¥Ø¯Ø§Ø±Ø© Ø£ÙƒÙˆØ§Ø¯ ØªÙØ¹ÙŠÙ„ Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù…ØªÙ…ÙŠØ²</p>
            </div>
            <div class="header-actions">
              <button onclick="loadCodes()" class="btn">
                <span>ğŸ”„ ØªØ­Ø¯ÙŠØ«</span>
              </button>
              <button
                onclick="showChangePasswordModal()"
                class="btn btn-warning"
              >
                <span>ğŸ” ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±</span>
              </button>
              <button onclick="logout()" class="btn btn-danger">
                <span>ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</span>
              </button>
            </div>
          </div>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon">ğŸ“Š</div>
              <h3 id="totalCount">0</h3>
              <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯</p>
            </div>
            <div class="stat-card">
              <div class="stat-icon">âœ…</div>
              <h3 id="usedCount">0</h3>
              <p>Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…ÙØ¹Ù„Ø©</p>
            </div>
            <div class="stat-card">
              <div class="stat-icon">ğŸ†“</div>
              <h3 id="availableCount">0</h3>
              <p>Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…ØªØ§Ø­Ø©</p>
            </div>
            <div class="stat-card">
              <div class="stat-icon">ğŸ“±</div>
              <h3 id="devicesCount">0</h3>
              <p>Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…ÙØ¹Ù„Ø©</p>
            </div>
          </div>

          <div class="add-code-form">
            <h3>â• Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ¯ Ø¬Ø¯ÙŠØ¯</h3>
            <div class="form-row">
              <input
                type="text"
                id="newCode"
                class="form-control"
                placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ù…Ø«Ø§Ù„: MOTAMAYEZ-2024-001)"
                maxlength="50"
              />
              <button onclick="addCode()" class="btn btn-success">
                <span>âœ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙˆØ¯</span>
              </button>
            </div>
            <div style="margin-top: 15px; font-size: 14px; color: #7f8c8d">
              ğŸ’¡ Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¥Ù„Ù‰ Ø£Ø­Ø±Ù ÙƒØ¨ÙŠØ±Ø© (UPPERCASE)
            </div>
          </div>

          <h3 style="margin-bottom: 15px; color: #2c3e50">ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ÙƒÙˆØ§Ø¯</h3>
          <div id="loading" class="loading">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯...</div>
          <div class="table-container">
            <table id="codesTable">
              <thead>
                <tr>
                  <th>Ø§Ù„ÙƒÙˆØ¯</th>
                  <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                  <th>Ø±Ù‚Ù… Ø§Ù„Ø¬Ù‡Ø§Ø²</th>
                  <th>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙØ¹ÙŠÙ„</th>
                  <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</th>
                  <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                </tr>
              </thead>
              <tbody>
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- ğŸ” Modal Ù„ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± -->
    <div id="changePasswordModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>ğŸ” ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±</h3>
          <button class="modal-close" onclick="hideChangePasswordModal()">
            Ã—
          </button>
        </div>
        <div class="modal-body">
          <div id="passwordAlert" class="alert" style="display: none"></div>
          <div class="form-group">
            <label for="currentPassword">ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø§Ù„Ø­Ø§Ù„ÙŠØ©</label>
            <input
              type="password"
              id="currentPassword"
              class="form-control"
              placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø§Ù„Ø­Ø§Ù„ÙŠØ©"
            />
          </div>
          <div class="form-group">
            <label for="newPassword">ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
            <input
              type="password"
              id="newPassword"
              class="form-control"
              placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)"
            />
          </div>
          <div class="form-group">
            <label for="confirmPassword">ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
            <input
              type="password"
              id="confirmPassword"
              class="form-control"
              placeholder="Ø£Ø¹Ø¯ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©"
            />
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn" onclick="hideChangePasswordModal()">Ø¥Ù„ØºØ§Ø¡</button>
          <button class="btn btn-success" onclick="changePassword()">
            ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
          </button>
        </div>
      </div>
    </div>

    <script>
      // Ø¹Ù†Ø§ØµØ± DOM
      const loginBox = document.getElementById("loginBox");
      const dashboard = document.getElementById("dashboard");
      const adminKeyInput = document.getElementById("adminKey");
      const loginAlert = document.getElementById("loginAlert");
      const alertBox = document.getElementById("alert");
      const codesTable = document.querySelector("#codesTable tbody");
      const loading = document.getElementById("loading");
      const newCodeInput = document.getElementById("newCode");
      const dbStatus = document.getElementById("dbStatus");
      const headerStats = document.getElementById("headerStats");

      // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
      const totalCount = document.getElementById("totalCount");
      const usedCount = document.getElementById("usedCount");
      const availableCount = document.getElementById("availableCount");
      const devicesCount = document.getElementById("devicesCount");

      // Modal Ù„ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±
      const changePasswordModal = document.getElementById(
        "changePasswordModal",
      );
      const passwordAlert = document.getElementById("passwordAlert");

      // ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
      async function login() {
        const key = adminKeyInput.value.trim();

        if (!key) {
          showAlert(loginAlert, "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±", "danger");
          adminKeyInput.focus();
          return;
        }

        const btn = event.target;
        const originalText = btn.innerHTML;
        btn.innerHTML = "<span>â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...</span>";
        btn.disabled = true;

        try {
          const response = await fetch("/admin/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ key }),
          });

          const data = await response.json();

          if (data.success) {
            loginBox.style.display = "none";
            dashboard.style.display = "block";
            showAlert(alertBox, "âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­", "success", 3000);
            loadCodes();
            loadStats();
          } else {
            showAlert(loginAlert, "âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø®Ø§Ø·Ø¦Ø©", "danger");
            adminKeyInput.value = "";
            adminKeyInput.focus();
          }
        } catch (error) {
          console.error("Login error:", error);
          showAlert(loginAlert, "âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±", "danger");
        } finally {
          btn.innerHTML = originalText;
          btn.disabled = false;
        }
      }

      // ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
      function logout() {
        if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ")) {
          loginBox.style.display = "block";
          dashboard.style.display = "none";
          adminKeyInput.value = "";
          showAlert(loginAlert, "ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­", "success");
        }
      }

      // ğŸ“‹ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯
      async function loadCodes() {
        loading.style.display = "block";
        codesTable.innerHTML = "";

        try {
          const response = await fetch("/admin/codes");
          if (!response.ok) {
            throw new Error("Network response was not ok");
          }
          const codes = await response.json();

          // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
          updateStats(codes);

          // Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯
          if (!Array.isArray(codes) || codes.length === 0) {
            codesTable.innerHTML = `
              <tr>
                <td colspan="6" style="text-align: center; padding: 50px; color: #7f8c8d;">
                  <div class="empty-state">
                    <div class="empty-state-icon">ğŸ“­</div>
                    <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙƒÙˆØ§Ø¯ Ø¨Ø¹Ø¯</h3>
                    <p>Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ø£ÙˆÙ„ ÙƒÙˆØ¯ ØªÙØ¹ÙŠÙ„</p>
                  </div>
                </td>
              </tr>
            `;
            loading.style.display = "none";
            return;
          }

          codes.forEach((code) => {
            const row = document.createElement("tr");

            // ØªØ¸Ù„ÙŠÙ„ Ø§Ù„ØµÙÙˆÙ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡Ø§ ÙÙŠ Ø¢Ø®Ø± 5 Ø¯Ù‚Ø§Ø¦Ù‚)
            const createdAt = new Date(code.createdAt);
            const now = new Date();
            const fiveMinutesAgo = new Date(now.getTime() - 5 * 60 * 1000);

            if (createdAt > fiveMinutesAgo) {
              row.classList.add("highlight");
            }

            const statusBadge = code.used
              ? `<span class="badge badge-danger">ğŸ”’ Ù…ÙØ¹Ù„</span>`
              : `<span class="badge badge-success">âœ… Ù…ØªØ§Ø­</span>`;

            // Ø§Ù„ØªØ§Ø±ÙŠØ® Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© (Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ)
            const formatDateEnglish = (date) => {
              if (!date) return "-";
              const d = new Date(date);
              // ØªÙ†Ø³ÙŠÙ‚: YYYY-MM-DD HH:MM
              const year = d.getFullYear();
              const month = String(d.getMonth() + 1).padStart(2, "0");
              const day = String(d.getDate()).padStart(2, "0");
              const hours = String(d.getHours()).padStart(2, "0");
              const minutes = String(d.getMinutes()).padStart(2, "0");
              return `${year}-${month}-${day} ${hours}:${minutes}`;
            };

            const activatedDate = code.activatedAt
              ? `<span class="date-text">${formatDateEnglish(code.activatedAt)}</span>`
              : '<span style="color: #999;">-</span>';

            const createdDate = `<span class="date-text">${formatDateEnglish(code.createdAt)}</span>`;

            row.innerHTML = `
              <td><strong style="font-family: monospace; font-size: 15px;">${code.code}</strong></td>
              <td>${statusBadge}</td>
              <td>${code.deviceId ? `<code style="background: #f8f9fa; padding: 4px 8px; border-radius: 4px; font-size: 13px;">${code.deviceId}</code>` : '<span style="color: #999;">-</span>'}</td>
              <td>${activatedDate}</td>
              <td>${createdDate}</td>
              <td>
                <div class="action-buttons">
                  ${
                    !code.used
                      ? `
                    <button onclick="deleteCode('${code.code}')" class="action-btn delete-btn" title="Ø­Ø°Ù Ø§Ù„ÙƒÙˆØ¯">
                      ğŸ—‘ï¸ Ø­Ø°Ù
                    </button>
                  `
                      : ""
                  }
                  <button onclick="showCodeDetails('${code.code}')" class="action-btn details-btn" title="Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„">
                    ğŸ” ØªÙØ§ØµÙŠÙ„
                  </button>
                </div>
              </td>
            `;

            codesTable.appendChild(row);
          });

          loading.style.display = "none";
        } catch (error) {
          console.error("Load codes error:", error);
          showAlert(
            alertBox,
            "âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯: " + error.message,
            "danger",
          );
          loading.style.display = "none";

          // Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© ÙØ§Ø±ØºØ© Ù…Ø¹ Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
          codesTable.innerHTML = `
            <tr>
              <td colspan="6" style="text-align: center; padding: 50px; color: #7f8c8d;">
                <div class="empty-state">
                  <div class="empty-state-icon">âš ï¸</div>
                  <h3>Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„</h3>
                  <p>${error.message}</p>
                  <button onclick="loadCodes()" class="btn" style="margin-top: 20px;">
                    ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
                  </button>
                </div>
              </td>
            </tr>
          `;
        }
      }

      // â• Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ¯ Ø¬Ø¯ÙŠØ¯
      async function addCode() {
        const code = newCodeInput.value.trim();

        if (!code) {
          showAlert(alertBox, "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„", "danger");
          newCodeInput.focus();
          return;
        }

        if (code.length < 3) {
          showAlert(alertBox, "Ø§Ù„ÙƒÙˆØ¯ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 3 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„", "danger");
          newCodeInput.focus();
          return;
        }

        const btn = event.target;
        const originalText = btn.innerHTML;
        btn.innerHTML = "<span>â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø¶Ø§ÙØ©...</span>";
        btn.disabled = true;

        try {
          const response = await fetch("/admin/add-code", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ code }),
          });

          const data = await response.json();

          if (data.success) {
            showAlert(
              alertBox,
              `âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙˆØ¯ <strong>${code.toUpperCase()}</strong> Ø¨Ù†Ø¬Ø§Ø­`,
              "success",
              5000,
            );
            newCodeInput.value = "";
            newCodeInput.focus();
            loadCodes();
          } else {
            showAlert(
              alertBox,
              data.message || "âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙˆØ¯",
              "danger",
            );
          }
        } catch (error) {
          console.error("Add code error:", error);
          showAlert(alertBox, "âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±", "danger");
        } finally {
          btn.innerHTML = originalText;
          btn.disabled = false;
        }
      }

      // ğŸ—‘ï¸ Ø­Ø°Ù ÙƒÙˆØ¯
      async function deleteCode(code) {
        if (
          !confirm(
            `Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„ÙƒÙˆØ¯ "${code}"ØŸ\n\nâš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡.`,
          )
        )
          return;

        try {
          const response = await fetch(`/admin/delete-code/${code}`, {
            method: "DELETE",
          });

          const data = await response.json();

          if (data.success) {
            showAlert(
              alertBox,
              `âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„ÙƒÙˆØ¯ <strong>${code}</strong> Ø¨Ù†Ø¬Ø§Ø­`,
              "success",
              5000,
            );
            loadCodes();
          } else {
            showAlert(
              alertBox,
              data.message || "âŒ ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙƒÙˆØ¯",
              "danger",
            );
          }
        } catch (error) {
          console.error("Delete code error:", error);
          showAlert(alertBox, "âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±", "danger");
        }
      }

      // ğŸ“Š ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
      function updateStats(codes) {
        if (!Array.isArray(codes)) return;

        const total = codes.length;
        const used = codes.filter((c) => c.used).length;
        const available = total - used;

        // Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ÙØ±ÙŠØ¯Ø©
        const deviceIds = codes
          .filter((c) => c.deviceId)
          .map((c) => c.deviceId);
        const uniqueDevices = [...new Set(deviceIds)].length;

        totalCount.textContent = total.toLocaleString();
        usedCount.textContent = used.toLocaleString();
        availableCount.textContent = available.toLocaleString();
        devicesCount.textContent = uniqueDevices.toLocaleString();

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ±ÙˆÙŠØ³Ø©
        headerStats.innerHTML = `
          Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: <strong>${total}</strong> ÙƒÙˆØ¯ | 
          Ø§Ù„Ù…ÙØ¹Ù„Ø©: <strong>${used}</strong> | 
          Ø§Ù„Ù…ØªØ§Ø­Ø©: <strong>${available}</strong> | 
          Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©: <strong>${uniqueDevices}</strong>
        `;
      }

      // ğŸ“ˆ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
      async function loadStats() {
        try {
          const response = await fetch("/admin/stats");
          if (response.ok) {
            const data = await response.json();
            if (data.success) {
              // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
              const healthResponse = await fetch("/health");
              if (healthResponse.ok) {
                const health = await healthResponse.json();
                if (health.database === "connected") {
                  dbStatus.innerHTML =
                    '<span class="status-dot active"></span><span>MongoDB Ù…ØªØµÙ„</span>';
                } else {
                  dbStatus.innerHTML =
                    '<span class="status-dot inactive"></span><span>MongoDB ØºÙŠØ± Ù…ØªØµÙ„</span>';
                }
              }
            }
          }
        } catch (error) {
          console.error("Error loading stats:", error);
          dbStatus.innerHTML =
            '<span class="status-dot inactive"></span><span>Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„</span>';
        }
      }

      // ğŸ” Ø¹Ø±Ø¶ Modal Ù„ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±
      function showChangePasswordModal() {
        changePasswordModal.style.display = "flex";
        document.getElementById("currentPassword").value = "";
        document.getElementById("newPassword").value = "";
        document.getElementById("confirmPassword").value = "";
        passwordAlert.style.display = "none";
      }

      function hideChangePasswordModal() {
        changePasswordModal.style.display = "none";
      }

      // ğŸ” ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±
      async function changePassword() {
        const currentPassword = document
          .getElementById("currentPassword")
          .value.trim();
        const newPassword = document.getElementById("newPassword").value.trim();
        const confirmPassword = document
          .getElementById("confirmPassword")
          .value.trim();

        if (!currentPassword || !newPassword || !confirmPassword) {
          showAlert(passwordAlert, "Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù…Ø·Ù„ÙˆØ¨Ø©", "danger");
          return;
        }

        if (newPassword.length < 6) {
          showAlert(
            passwordAlert,
            "ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„",
            "danger",
          );
          return;
        }

        if (newPassword !== confirmPassword) {
          showAlert(passwordAlert, "ÙƒÙ„Ù…ØªØ§ Ø§Ù„Ø³Ø± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚ØªÙŠÙ†", "danger");
          return;
        }

        try {
          const response = await fetch("/admin/change-password", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              currentPassword,
              newPassword,
            }),
          });

          const data = await response.json();

          if (data.success) {
            showAlert(passwordAlert, "âœ… ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø¨Ù†Ø¬Ø§Ø­", "success");

            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø¨Ø¹Ø¯ 2 Ø«Ø§Ù†ÙŠØ©
            setTimeout(() => {
              hideChangePasswordModal();
              showAlert(
                alertBox,
                "âœ… ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø¨Ù†Ø¬Ø§Ø­. Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.",
                "success",
                5000,
              );

              // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
              setTimeout(() => {
                logout();
              }, 2000);
            }, 2000);
          } else {
            showAlert(passwordAlert, `âŒ ${data.message}`, "danger");
          }
        } catch (error) {
          console.error("Change password error:", error);
          showAlert(passwordAlert, "âŒ Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±", "danger");
        }
      }

      // ğŸ” Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯
      function showCodeDetails(code) {
        alert(
          `ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯:\n\nØ§Ù„ÙƒÙˆØ¯: ${code}\n\nØ§Ø³ØªØ®Ø¯Ù… Ø²Ø± ØªØ­Ø¯ÙŠØ« Ù„Ø±Ø¤ÙŠØ© Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª.`,
        );
      }

      // ğŸ’¬ Ø¹Ø±Ø¶ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡
      function showAlert(element, message, type, timeout = 5000) {
        element.innerHTML = message;
        element.className = `alert alert-${type}`;
        element.style.display = "block";

        if (timeout > 0) {
          setTimeout(() => {
            element.style.display = "none";
          }, timeout);
        }
      }

      // ğŸ¯ Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
      document.addEventListener("DOMContentLoaded", () => {
        // Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±
        newCodeInput.addEventListener("keypress", (e) => {
          if (e.key === "Enter") addCode();
        });

        adminKeyInput.addEventListener("keypress", (e) => {
          if (e.key === "Enter") login();
        });

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
        window.addEventListener("click", (e) => {
          if (e.target === changePasswordModal) {
            hideChangePasswordModal();
          }
        });

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„Ø§Øª Ø¨Ø§Ù„Ø²Ø± ESC
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape") {
            hideChangePasswordModal();
          }
        });

        // ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
        adminKeyInput.focus();

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©
        setInterval(() => {
          if (dashboard.style.display !== "none") {
            loadStats();
          }
        }, 30000);
      });

      // ğŸ”„ ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© ÙƒÙ„ 60 Ø«Ø§Ù†ÙŠØ©
      setInterval(() => {
        if (
          dashboard.style.display !== "none" &&
          document.visibilityState === "visible"
        ) {
          loadCodes();
        }
      }, 60000);
    </script>
  </body>
</html>
